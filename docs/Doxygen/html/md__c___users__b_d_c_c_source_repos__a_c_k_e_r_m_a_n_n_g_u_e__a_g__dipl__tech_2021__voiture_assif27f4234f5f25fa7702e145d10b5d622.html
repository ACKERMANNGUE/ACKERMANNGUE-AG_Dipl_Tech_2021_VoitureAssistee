<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Code source du projet Voiture Assistée: Slamtec RPLIDAR Public SDK for C++</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Code source du projet Voiture Assistée
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Slamtec RPLIDAR Public SDK for C++ </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md167"></a>
Introduction</h1>
<p>Slamtec RPLIDAR(<a href="https://www.slamtec.com/lidar/a3">https://www.slamtec.com/lidar/a3</a>) series is a set of high-performance and low-cost LIDAR(<a href="https://en.wikipedia.org/wiki/Lidar">https://en.wikipedia.org/wiki/Lidar</a>) sensors, which is the perfect sensor of 2D SLAM, 3D reconstruction, multi-touch, and safety applications.</p>
<p>This is the public SDK of RPLIDAR products in C++, and open-sourced under GPLv3 license.</p>
<p>If you are using ROS (Robot Operating System), please use our open-source ROS node directly: <a href="https://github.com/slamtec/rplidar_ros">https://github.com/slamtec/rplidar_ros</a> .</p>
<p>If you are just evaluating RPLIDAR, you can use Slamtec RoboStudio(<a href="https://www.slamtec.com/robostudio">https://www.slamtec.com/robostudio</a>) (currently only support Windows) to do the evaulation.</p>
<h1><a class="anchor" id="autotoc_md168"></a>
License</h1>
<p>The SDK itself is licensed under BSD 2-clause license. The demo applications are licensed under GPLv3 license.</p>
<h1><a class="anchor" id="autotoc_md169"></a>
Release Notes</h1>
<ul>
<li><a href="https://github.com/slamtec/rplidar_sdk/blob/master/docs/ReleaseNote.v1.12.0.md">v1.12.0</a></li>
<li><a href="https://github.com/slamtec/rplidar_sdk/blob/master/docs/ReleaseNote.v1.11.0.md">v1.11.0</a></li>
<li><a href="https://github.com/slamtec/rplidar_sdk/blob/master/docs/ReleaseNote.v1.10.0.md">v1.10.0</a></li>
<li><a href="https://github.com/slamtec/rplidar_sdk/blob/master/docs/ReleaseNote.v1.9.1.md">v1.9.1</a></li>
<li><a href="https://github.com/slamtec/rplidar_sdk/blob/master/docs/ReleaseNote.v1.9.0.md">v1.9.0</a></li>
<li><a href="https://github.com/slamtec/rplidar_sdk/blob/master/docs/ReleaseNote.v1.8.1.md">v1.8.1</a></li>
<li><a href="https://github.com/slamtec/rplidar_sdk/blob/master/docs/ReleaseNote.v1.8.0.md">v1.8.0</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md170"></a>
Supported Platforms</h1>
<p>RPLIDAR SDK supports Windows, macOS and Linux by using Visual Studio 2010 projects and Makefile.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">LIDAR Model \ Platform   </th><th class="markdownTableHeadNone">Windows   </th><th class="markdownTableHeadNone">macOS   </th><th class="markdownTableHeadNone">Linux    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A1   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">A2   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Yes    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">A3   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Yes   </td><td class="markdownTableBodyNone">Yes   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md171"></a>
Quick Start</h1>
<h2><a class="anchor" id="autotoc_md172"></a>
On Windows</h2>
<p>If you have Microsoft Visual Studio 2010 installed, just open sdk/workspaces/vc10/sdk_and_demo.sln, and compile. It contains the library as well as some demo applications.</p>
<h2><a class="anchor" id="autotoc_md173"></a>
On macOS and Linux</h2>
<p>Please make sure you have make and g++ installed, and then just invoke make in the root directory, you can get the compiled result at <code>output/$PLATFORM/$SCHEME</code>, such as <code>output/Linux/Release</code>. </p><pre class="fragment">make
</pre><p> The Makefile compiles Release build by default, and you can also use <code>make DEBUG=1</code> to compile Debug builds.</p>
<h1><a class="anchor" id="autotoc_md174"></a>
Cross Compile</h1>
<p>The Makefile system used by RPLIDAR public SDK support cross compiling.</p>
<p>The following command can be used to cross compile the SDK for <code>arm-linux-gnueabihf</code> targets: </p><pre class="fragment">CROSS_COMPILE_PREFIX=arm-linux-gnueabihf ./cross_compile.sh
</pre> <h1><a class="anchor" id="autotoc_md175"></a>
Demo Applications</h1>
<p>RPLIDAR public SDK includes some simple demos to do fast evaulation:</p>
<h2><a class="anchor" id="autotoc_md176"></a>
ultra_simple</h2>
<p>This demo application simply connects to an RPLIDAR device and outputs the scan data to the console. </p><pre class="fragment">ultra_simple &lt;serial_port_device&gt;
</pre><p> For instance: </p><pre class="fragment">ultra_simple \\.\COM11  # on Windows
ultra_simple /dev/ttyUSB0
</pre> <blockquote class="doxtable">
<p>Note: Usually you need root privilege to access tty devices under Linux. To eliminate this limitation, please add <code>KERNEL=="ttyUSB*", MODE="0666"</code> to the configuration of udev, and reboot. </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md177"></a>
simple_grabber</h2>
<p>This application demonstrates the process of getting RPLIDAR’s serial number, firmware version and healthy status after connecting the PC and RPLIDAR. Then the demo application grabs two round of scan data and shows the range data as histogram in the command line mode.</p>
<h2><a class="anchor" id="autotoc_md178"></a>
frame_grabber (Legacy)</h2>
<p>This demo application can show real-time laser scans in the GUI and is only available on Windows platform.</p>
<p>We have stopped the development of this demo application, please use Slamtec RoboStudio (<a href="https://www.slamtec.com/robostudio">https://www.slamtec.com/robostudio</a>) instead.</p>
<h1><a class="anchor" id="autotoc_md179"></a>
SDK Usage</h1>
<blockquote class="doxtable">
<p>For detailed documents of RPLIDAR SDK, please refer to our user manual: <a href="https://download.slamtec.com/api/download/rplidar-sdk-manual/1.0?lang=en">https://download.slamtec.com/api/download/rplidar-sdk-manual/1.0?lang=en</a> </p>
</blockquote>
<h2><a class="anchor" id="autotoc_md180"></a>
Include Header</h2>
<pre class="fragment">#include &lt;rplidar.h&gt;
</pre><p> Usually you only need to include this file to get all functions of RPLIDAR SDK.</p>
<h2><a class="anchor" id="autotoc_md181"></a>
SDK Initialization and Termination</h2>
<p>There are two static interfaces to create and dispose RPLIDAR driver instance. Each RPLIDAR driver instance can only be used to communicate with one RPLIDAR device. You can freely allocate arbitrary number of RPLIDAR driver instances to communicate with multiple RPLIDAR devices concurrently. </p><pre class="fragment">/// Create an RPLIDAR Driver Instance
/// This interface should be invoked first before any other operations
///
/// \param drivertype the connection type used by the driver. 
static RPlidarDriver * RPlidarDriver::CreateDriver(_u32 drivertype = DRIVER_TYPE_SERIALPORT);

/// Dispose the RPLIDAR Driver Instance specified by the drv parameter
/// Applications should invoke this interface when the driver instance is no longer used in order to free memory
static void RPlidarDriver::DisposeDriver(RPlidarDriver * drv);
</pre><p> For example: </p><pre class="fragment">#include &lt;rplidar.h&gt;

int main(int argc, char* argv)
{
    RPlidarDriver* lidar = RPlidarDriver::CreateDriver();

    // TODO

    RPlidarDriver::DisposeDriver(lidar);
}
</pre> <h2><a class="anchor" id="autotoc_md182"></a>
Connect to RPLIDAR</h2>
<p>After creating an RPlidarDriver instance, you can use <code>connect()</code> method to connect to a serial port: </p><pre class="fragment">u_result res = lidar-&gt;connect("/dev/ttyUSB0", 115200);

if (IS_OK(res))
{
    // TODO
    lidar-&gt;disconnect();
}
else
{
    fprintf(stderr, "Failed to connect to LIDAR %08x\r\n", res);
}
</pre> <h2><a class="anchor" id="autotoc_md183"></a>
Start spinning motor</h2>
<p>The LIDAR is not spinning by default. Method <code>startMotor()</code> is used to start this motor.</p>
<blockquote class="doxtable">
<p>For RPLIDAR A1 series, this method will enable DTR signal to make the motor rotate; for A2 and A3 serieses, the method will make the accessory board to output a PWM signal to MOTOR_PWM pin. </p>
</blockquote>
<p>lidar-&gt;startMotor(); // TODO lidar-&gt;stopMotor();</p>
<h2><a class="anchor" id="autotoc_md184"></a>
Start scan</h2>
<p>Slamtec RPLIDAR support different scan modes for compatibility and performance. Since RPLIDAR SDK 1.6.0, a new API <code>getAllSupportedScanModes()</code> has been added to the SDK. </p><pre class="fragment">std::vector&lt;RplidarScanMode&gt; scanModes;
lidar-&gt;getAllSupportedScanModes(scanModes);
</pre><p> You can pick a scan mode from this list like this: </p><pre class="fragment">lidar-&gt;startScanExpress(false, scanModes[0].id);
</pre><p> Or you can just use the typical scan mode of RPLIDAR like this: </p><pre class="fragment">RplidarScanMode scanMode;
lidar-&gt;startScan(false, true, 0, &amp;scanMode);
</pre> <h2><a class="anchor" id="autotoc_md185"></a>
Grab scan data</h2>
<p>When the RPLIDAR is scanning, you can use <code>grabScanData()</code> and <code>grabScanDataHq()</code> API to fetch one frame of scan. The difference between <code>grabScanData()</code> and <code>grabScanDataHq()</code> is the latter one support distances farther than 16.383m, which is required for RPLIDAR A2M6-R4 and RPLIDAR A3 series.</p>
<blockquote class="doxtable">
<p>The <code>grabScanDataHq()</code> API is backward compatible with old LIDAR models and old firmwares. So we recommend always using this API, and use <code>grabScanData()</code> only for compatibility. </p>
</blockquote>
<p><a class="el" href="structrplidar__response__measurement__node__hq__t.html">rplidar_response_measurement_node_hq_t</a> nodes[8192]; size_t nodeCount = sizeof(nodes)/sizeof(<a class="el" href="structrplidar__response__measurement__node__hq__t.html">rplidar_response_measurement_node_hq_t</a>); res = lidar-&gt;grabScanDataHq(nodes, nodeCount);</p>
<p>if (<a class="el" href="types_8h.html#aab0adb4ddb301fc29e5260dd871772dc">IS_FAIL(res)</a>) { // failed to get scan data }</p>
<h2><a class="anchor" id="autotoc_md186"></a>
Defination of data structure &lt;tt&gt;rplidar_response_measurement_node_hq_t&lt;/tt&gt;</h2>
<p>The defination of <code><a class="el" href="structrplidar__response__measurement__node__hq__t.html">rplidar_response_measurement_node_hq_t</a></code> is: </p><pre class="fragment">#if defined(_WIN32)
#pragma pack(1)
#endif

typedef struct rplidar_response_measurement_node_hq_t {
    _u16   angle_z_q14; 
    _u32   dist_mm_q2; 
    _u8    quality;  
    _u8    flag;
} __attribute__((packed)) rplidar_response_measurement_node_hq_t;

#if defined(_WIN32)
#pragma pack()
#endif
</pre><p> The definiton of each fields are:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Field   </th><th class="markdownTableHeadNone">Data Type   </th><th class="markdownTableHeadNone">Comments    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">angle_z_q14   </td><td class="markdownTableBodyNone">u16_z_q14   </td><td class="markdownTableBodyNone">It is a fix-point angle desciption in z presentation    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">dist_mm_q2   </td><td class="markdownTableBodyNone">u32_q2   </td><td class="markdownTableBodyNone">Distance in millimeter of fixed point values    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">quality   </td><td class="markdownTableBodyNone">u8   </td><td class="markdownTableBodyNone">Measurement quality (0 ~ 255)    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">flag   </td><td class="markdownTableBodyNone">u8   </td><td class="markdownTableBodyNone">Flags, current only one bit used: <code>RPLIDAR_RESP_MEASUREMENT_SYNCBIT</code>   </td></tr>
</table>
<p>For example: </p><pre class="fragment">float angle_in_degrees = node.angle_z_q14 * 90.f / (1 &lt;&lt; 14);
float distance_in_meters = node.dist_mm_q2 / 1000.f / (1 &lt;&lt; 2);
</pre> <h1><a class="anchor" id="autotoc_md187"></a>
Contact Slamtec</h1>
<p>If you have any extra questions, please feel free to contact us at our support email: </p><pre class="fragment">support AT slamtec DOT com
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
