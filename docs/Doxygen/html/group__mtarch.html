<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Code source du projet Voiture Assistée: Architecture support for multi-threading</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo_voiture_flatdesign_sensors_range.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Code source du projet Voiture Assistée
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Architecture support for multi-threading<div class="ingroups"><a class="el" href="group__sys.html">Sys</a> &raquo; <a class="el" href="group__mt.html">Multi-threading library</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:mt_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mt_8h.html">mt.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:gaf38dd3031a97b4fe4cdd152e6241fd31"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#gaf38dd3031a97b4fe4cdd152e6241fd31">MT_STATE_EXITED</a>&#160;&#160;&#160;2</td></tr>
<tr class="separator:gaf38dd3031a97b4fe4cdd152e6241fd31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2003a433a754bf0ac4d14a7900045c6b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#ga2003a433a754bf0ac4d14a7900045c6b">MT_STATE_STARTED</a>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga2003a433a754bf0ac4d14a7900045c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa8dae45595dba936ab58b7d303450dc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#gaa8dae45595dba936ab58b7d303450dc4">mtarch_exec</a> (struct mtarch_thread *thread)</td></tr>
<tr class="separator:gaa8dae45595dba936ab58b7d303450dc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae6c3647c7d74d742d7af00bfb8b439eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#gae6c3647c7d74d742d7af00bfb8b439eb">mtarch_init</a> (void)</td></tr>
<tr class="separator:gae6c3647c7d74d742d7af00bfb8b439eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4a3765ed7379cf317857a90f444027f6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#ga4a3765ed7379cf317857a90f444027f6">mtarch_pstart</a> (void)</td></tr>
<tr class="separator:ga4a3765ed7379cf317857a90f444027f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga87e734c5734180741b9400efc0af2dac"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#ga87e734c5734180741b9400efc0af2dac">mtarch_pstop</a> (void)</td></tr>
<tr class="separator:ga87e734c5734180741b9400efc0af2dac"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga55f67d4d317753c821c07d1ff5914288"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#ga55f67d4d317753c821c07d1ff5914288">mtarch_remove</a> (void)</td></tr>
<tr class="separator:ga55f67d4d317753c821c07d1ff5914288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9802b3e4ee64b9744c202fe5c908e0e0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#ga9802b3e4ee64b9744c202fe5c908e0e0">mtarch_start</a> (struct mtarch_thread *thread, void(*function)(void *<a class="el" href="rplidar__protocol_8h.html#a9e1fb613e68ae873f82dc8162b0e35ce">data</a>), void *<a class="el" href="rplidar__protocol_8h.html#a9e1fb613e68ae873f82dc8162b0e35ce">data</a>)</td></tr>
<tr class="separator:ga9802b3e4ee64b9744c202fe5c908e0e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3703ee485e2a20e0501f7018bd9ddb1b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#ga3703ee485e2a20e0501f7018bd9ddb1b">mtarch_stop</a> (struct mtarch_thread *thread)</td></tr>
<tr class="separator:ga3703ee485e2a20e0501f7018bd9ddb1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9fdf472144bb2412c912df15cae85e06"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mtarch.html#ga9fdf472144bb2412c912df15cae85e06">mtarch_yield</a> (void)</td></tr>
<tr class="separator:ga9fdf472144bb2412c912df15cae85e06"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>The Contiki multi-threading library requires some architecture specific support for setting up and switching stacks. This support requires four stack manipulation functions to be implemented: <a class="el" href="group__mtarch.html#ga9802b3e4ee64b9744c202fe5c908e0e0">mtarch_start()</a>, which sets up the stack frame for a new thread, <a class="el" href="group__mtarch.html#gaa8dae45595dba936ab58b7d303450dc4">mtarch_exec()</a>, which switches in the stack of a thread, <a class="el" href="group__mtarch.html#ga9fdf472144bb2412c912df15cae85e06">mtarch_yield()</a>, which restores the kernel stack from a thread's stack and <a class="el" href="group__mtarch.html#ga3703ee485e2a20e0501f7018bd9ddb1b">mtarch_stop()</a>, which cleans up the stack of a thread. Additionally, two functions for controlling the preemption (if any) must be implemented: <a class="el" href="group__mtarch.html#ga4a3765ed7379cf317857a90f444027f6">mtarch_pstart()</a> and <a class="el" href="group__mtarch.html#ga87e734c5734180741b9400efc0af2dac">mtarch_pstop()</a>. If no preemption is used, these functions can be implemented as empty functions. Finally, the function <a class="el" href="group__mtarch.html#gae6c3647c7d74d742d7af00bfb8b439eb">mtarch_init()</a> is called by <a class="el" href="group__mt.html#ga9b7e54b6a727e74f998736238a6ba424">mt_init()</a>, and can be used for initialization of timer interrupts, or any other mechanisms required for correct operation of the architecture specific support functions while <a class="el" href="group__mtarch.html#ga55f67d4d317753c821c07d1ff5914288">mtarch_remove()</a> is called by <a class="el" href="group__mt.html#gad4b502d5e08885704143bffe3d4565d6">mt_remove()</a> to clean up those resources. </p>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="gaf38dd3031a97b4fe4cdd152e6241fd31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf38dd3031a97b4fe4cdd152e6241fd31">&#9670;&nbsp;</a></span>MT_STATE_EXITED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MT_STATE_EXITED&#160;&#160;&#160;2</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga2003a433a754bf0ac4d14a7900045c6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga2003a433a754bf0ac4d14a7900045c6b">&#9670;&nbsp;</a></span>MT_STATE_STARTED</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MT_STATE_STARTED&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gaa8dae45595dba936ab58b7d303450dc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa8dae45595dba936ab58b7d303450dc4">&#9670;&nbsp;</a></span>mtarch_exec()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtarch_exec </td>
          <td>(</td>
          <td class="paramtype">struct mtarch_thread *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Start executing a thread.</p>
<p>This function is called from <a class="el" href="group__mt.html#ga2ceaab27edea6cebcdc92cbc3d412e1d">mt_exec()</a> and the purpose of the function is to start execution of the thread. The function should switch in the stack of the thread, and does not return until the thread has explicitly yielded (using <a class="el" href="group__mt.html#ga821508e238ebc521234018e469afe636">mt_yield()</a>) or until it is preempted.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>A pointer to a struct mtarch_thread for the thread to be executed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="gae6c3647c7d74d742d7af00bfb8b439eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae6c3647c7d74d742d7af00bfb8b439eb">&#9670;&nbsp;</a></span>mtarch_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtarch_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initialize the architecture specific support functions for the multi-thread library.</p>
<p>This function is implemented by the architecture specific functions for the multi-thread library and is called by the <a class="el" href="group__mt.html#ga9b7e54b6a727e74f998736238a6ba424">mt_init()</a> function as part of the initialization of the library. The <a class="el" href="group__mtarch.html#gae6c3647c7d74d742d7af00bfb8b439eb">mtarch_init()</a> function can be used for, e.g., starting preemption timers or other architecture specific mechanisms required for the operation of the library. </p>

</div>
</div>
<a id="ga4a3765ed7379cf317857a90f444027f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4a3765ed7379cf317857a90f444027f6">&#9670;&nbsp;</a></span>mtarch_pstart()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtarch_pstart </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga87e734c5734180741b9400efc0af2dac"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga87e734c5734180741b9400efc0af2dac">&#9670;&nbsp;</a></span>mtarch_pstop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtarch_pstop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ga55f67d4d317753c821c07d1ff5914288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga55f67d4d317753c821c07d1ff5914288">&#9670;&nbsp;</a></span>mtarch_remove()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtarch_remove </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Uninstall library and clean up. </p>

</div>
</div>
<a id="ga9802b3e4ee64b9744c202fe5c908e0e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9802b3e4ee64b9744c202fe5c908e0e0">&#9670;&nbsp;</a></span>mtarch_start()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtarch_start </td>
          <td>(</td>
          <td class="paramtype">struct mtarch_thread *&#160;</td>
          <td class="paramname"><em>thread</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void(*)(void *<a class="el" href="rplidar__protocol_8h.html#a9e1fb613e68ae873f82dc8162b0e35ce">data</a>)&#160;</td>
          <td class="paramname"><em>function</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Setup the stack frame for a thread that is being started.</p>
<p>This function is called by the <a class="el" href="group__mt.html#ga7eb58b7ea94b3c1b86494a43ef95fb9d">mt_start()</a> function in order to set up the architecture specific stack of the thread to be started.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>A pointer to a struct mtarch_thread for the thread to be started.</td></tr>
    <tr><td class="paramname">function</td><td>A pointer to the function that the thread will start executing the first time it is scheduled to run.</td></tr>
    <tr><td class="paramname">data</td><td>A pointer to the argument that the function should be passed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga3703ee485e2a20e0501f7018bd9ddb1b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3703ee485e2a20e0501f7018bd9ddb1b">&#9670;&nbsp;</a></span>mtarch_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtarch_stop </td>
          <td>(</td>
          <td class="paramtype">struct mtarch_thread *&#160;</td>
          <td class="paramname"><em>thread</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Clean up the stack of a thread.</p>
<p>This function is called by the <a class="el" href="group__mt.html#ga56186be13a78313ac222a9a11cef92b4">mt_stop()</a> function in order to clean up the architecture specific stack of the thread to be stopped.</p>
<dl class="section note"><dt>Note</dt><dd>If the stack is wholly contained in struct mtarch_thread this function may very well be empty.</dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">thread</td><td>A pointer to a struct mtarch_thread for the thread to be stopped. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga9fdf472144bb2412c912df15cae85e06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9fdf472144bb2412c912df15cae85e06">&#9670;&nbsp;</a></span>mtarch_yield()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mtarch_yield </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Yield the processor.</p>
<p>This function is called by the <a class="el" href="group__mt.html#ga821508e238ebc521234018e469afe636">mt_yield()</a> function, which is called from the running thread in order to give up the processor. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
